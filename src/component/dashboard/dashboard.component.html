
<p-toast />

<div class="dashboard-container">
  <!-- Dashboard Loader -->
  <div *ngIf="isMarketClosed" class="chart-loader z-5">
    <i class="pi pi-clock" style="color: #708090; font-size: 2rem"></i>
    <p class="mt-3 text-center">{{ loadingMessage }}</p>
  </div>
  <div *ngIf="isLoading" class="dashboard-loader">
    <div class="loader-content">
      <p-progressSpinner
        [style]="{ width: '50px', height: '50px' }"
        strokeWidth="8"
        fill="var(--surface-ground)"
        animationDuration=".5s"
      ></p-progressSpinner>
      <p class="mt-3">{{ loadingMessage }}</p>
    </div>
  </div>

  <!-- Dashboard Content -->
  <div class="h-full flex flex-column gap-2">
    <h3 class="text-primary m-0 font-medium">Welcome to Finance Books!</h3>
    <div class="flex w-full h-full gap-2">
      <app-tv-chart class="h-full w-full" [selectedStock]="selectedStock" [isParentLoading]="isLoading" [liveDataMap]="liveDataMap" [chartData]="chartData">  </app-tv-chart>
      <div class="flex flex-column w-3 h-full gap-2">
       <app-nifty50-watch-list [liveDataMap]="liveDataMap" [nifty50]="nifty50" (selectingStockEvent)="selectedStock = $event">   </app-nifty50-watch-list>
      </div>
    </div>
  </div>
  